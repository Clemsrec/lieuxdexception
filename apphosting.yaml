# Firebase App Hosting Configuration - Lieux d'Exception
# Documentation: https://firebase.google.com/docs/app-hosting

# Configuration du build et runtime
runConfig:
  minInstances: 0  # Scale to zero pour économiser
  maxInstances: 4  # Maximum 4 instances
  concurrency: 80  # 80 requêtes simultanées par instance
  cpu: 1           # 1 vCPU par instance
  memoryMiB: 512   # 512 MB de RAM par instance

env:
  # ============================================================================
  # VARIABLES FIREBASE (Auto-injectées par Firebase App Hosting)
  # ============================================================================
  # Firebase App Hosting injecte automatiquement :
  # - FIREBASE_CONFIG (pour Admin SDK côté serveur)
  # - FIREBASE_WEBAPP_CONFIG (pour Client SDK côté navigateur)
  # Pas besoin de les définir manuellement !
  
  # ============================================================================
  # VARIABLES SYSTÈME
  # ============================================================================
  - variable: NODE_ENV
    value: production
    availability:
      - BUILD
      - RUNTIME
  
  # Important : Force Next.js à utiliser le standalone output
  - variable: NEXT_TELEMETRY_DISABLED
    value: "1"
    availability:
      - BUILD
      - RUNTIME
  
  # ============================================================================
  # VARIABLES FIREBASE PUBLIQUES (Client SDK)
  # ============================================================================
  # Ces variables sont nécessaires pour l'authentification côté navigateur
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: AIzaSyBpSVfonXBg3NGJGGwRg5IHFLv8ukdDOfg
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: lieux-d-exceptions.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: lieux-d-exceptions
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: lieux-d-exceptions.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "886228169873"
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:886228169873:web:154416b7ee0e74b70cfb30
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_DATABASE_ID
    value: lieuxdexception
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_APP_URL
    value: https://lieuxdexception.com
    availability:
      - BUILD
      - RUNTIME
